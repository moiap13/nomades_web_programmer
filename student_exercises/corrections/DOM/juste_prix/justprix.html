<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <style>
    fieldset {
      max-width: 400px;;
    }
  </style>
  <fieldset>
    <legend>
      <h1>Le Just Prix</h1>
    </legend>
    <p>Quel est le just prix?</p>
    <input type="number" name="prix" id="prix" title="prix">
    <button onclick="checkPrix()">proposer</button>
    <ul id="messages"></ul>
  </fieldset>

  <script>
    const PRIX = Math.floor(Math.random() * 100) + 1;
    console.log('Juste Prix: ', PRIX);
    const btn = document.querySelector("button")
    let counter = 0
    const checkPrix = () => {
      // TODO: récupérer la valeur du champ de saisie (prix de l'utilisateur) /!\ hint: parseInt, int i = Number(val)
      // TODO: comparer avec le juste prix (PRIX)
      // TODO: si le prix est identique, afficher "Bravo, vous avez gagné"
      // TODO: sinon, regarde si le prix est plus grand ou pluis petit pour afficher "C'est plus" ou "C'est moins"
      // TODO: afficher le message dans la page.
      /*
      let champs = Number(document.querySelector("#prix").value)
      let msg = document.querySelector("#messages")
      if(champs === PRIX){
        msg.innerHTML += '<li>Bravo vous avez gagné</li>'
        alert(`Bravo vous avez gagné apres ${document.querySelectorAll("#messages li").length} coups`)
      } else if(champs > PRIX) {
        msg.innerHTML += "<li>C'est moins</li>"
      } else {
        msg.innerHTML += "<li>C'est plus</li>" 
      }
      */

      const i = (document.querySelector("#prix").valueAsNumber)
      const ul = document.querySelector("#messages")
      counter++

      if(i === PRIX){
        alert(`Bravo vous avez gagné en ${counter} coups`)
        btn.disabled = true
        return
      }

      const node = document.createElement("li")
      console.log(node)
      let textnode
      if(i > PRIX){
        textnode = document.createTextNode("C'est moin")
      }
      if(i < PRIX){
        textnode = document.createTextNode("C'est plus")
      }
      node.appendChild(textnode)
      console.log(node)
      ul.appendChild(node)
    }
  </script>
</body>
</html>